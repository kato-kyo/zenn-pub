---
title: "ã€Flutteré–‹ç™ºã€‘ å°å…¥ãƒ¡ãƒ¢ ~å…¨ä½“æ§‹æˆ~"
emoji: "ğŸ“"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics:  ["flutter"]
published_at: 2023-02-21 10:00
published: true
---
<!-- ãƒ–ãƒ­ã‚°ç§»è¡Œ articles/2023-02-21-flutter-memo-3.md -->

## ã‚¢ãƒ—ãƒªå…¨ä½“ã«é–¢ã‚ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

- build\_runner: è‡ªå‹•ç”Ÿæˆè£œåŠ©
- flutter\_gen\_runner: ãƒªã‚½ãƒ¼ã‚¹ã®è‡ªå‹•ç”Ÿæˆ
- flutter\_localizations: å¤šè¨€èªåŒ– (ãƒªã‚½ãƒ¼ã‚¹å…±é€šåŒ–ã®ãŸã‚ã€1è¨€èªã®ã¿ã§ã‚‚å°å…¥ã™ã¹ã)
    - intl: æ—¥ä»˜ãªã©ã®å¤šè¨€èªå¯¾å¿œã€€ï¼ˆä½µã›ã¦å°å…¥)

* * *

### build\_runner

[https://pub.dev/packages/build\_runner](https://pub.dev/packages/build_runner)

#### å°å…¥

```
dart pub add build_runner --dev
```

å˜ä½“ã§åˆ©ç”¨ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã„ã†ã‚ˆã‚Šã¯ã€ä»–ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨çµ„ã¿åˆã‚ã›ã¦åˆ©ç”¨ã™ã‚‹ã‚‚ã®ã€‚

#### ç”Ÿæˆã‚³ãƒãƒ³ãƒ‰

```
flutter pub run build_runner build
```

ã‚ªãƒ—ã‚·ãƒ§ãƒ³: --delete-conflicting-outputs ã™ã§ã«è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒç«¶åˆã—ã¦ã„ãŸå ´åˆã«ã€å¤ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã™ã‚‹ã€‚

* * *

### flutter\_gen\_runner

[https://pub.dev/packages/flutter\_gen\_runner](https://pub.dev/packages/flutter_gen_runner)

#### äº‹å‰æº–å‚™

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¨ªæ–­ã—ã¦åˆ©ç”¨ã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã©ã¡ã‚‰ã§ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«åˆ©ç”¨ã¨ã—ã¦å°å…¥ã™ã‚‹ã€‚

1. brewã‚³ãƒãƒ³ãƒ‰
    
    ```
    brew install FlutterGen/tap/fluttergen
    ```
    
2. dart ã‚³ãƒãƒ³ãƒ‰
    
    ```
    dart pub global activate flutter_gen
    ```
    
    ç’°å¢ƒå¤‰æ•°å¤‰æ•°ã«ä¸‹è¨˜ã‚’è¿½åŠ ã™ã‚‹ã€‚
    
    ```
    $HOME/.pub-cache/bin
    ```
    
    [å‚è€ƒ](https://dart.dev/tools/pub/cmd/pub-global#running-a-script-from-your-path)
    

#### å°å…¥

ä¸Šè¨˜ã§ç´¹ä»‹ã—ãŸ build\_runnner ã®ä¸€éƒ¨ã¨ã—ã¦åˆ©ç”¨ã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§è¿½åŠ ã™ã‚‹ã€‚

```
flutter pub add --dev flutter_gen_runner
```

pubspec.yaml

```
flutter_gen:
  output: lib/gen/assets/
  integrations:
    flutter_svg: true
```

`output`: ç”Ÿæˆã—ãŸã‚³ãƒ¼ãƒ‰ã®æ ¼ç´å…ˆã€€ï¼ˆdefaultã¯ã€lib/gen/) `flutter_svg`: svgã‚’åˆ©ç”¨ã™ã‚‹å ´åˆæœ‰åŠ¹ã«ã—ã¦ãŠãã€‚

#### ç”Ÿæˆã‚³ãƒãƒ³ãƒ‰

```
flutter pub run build_runner build --delete-conflicting-outputs
```

#### åˆ©ç”¨

æŒ‡å®šã—ãŸ outputãƒ•ã‚©ãƒ«ãƒ€ã«ã€`assets.gen.dart`ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚

åˆ©ç”¨ã—ãŸã„ç®‡æ‰€ã§ã€`Assets.images.xxxx` ã®ã‚ˆã†ã«ã€ãƒªã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«åã‚’å¤‰æ•°åã¨ã—ã¦å‘¼ã³å‡ºã—ã¦åˆ©ç”¨ã§ãã‚‹ã€‚

* * *

### flutter\_localizations, intl

[https://docs.flutter.dev/development/accessibility-and-localization/internationalization#setting-up](https://docs.flutter.dev/development/accessibility-and-localization/internationalization#setting-up)

[https://pub.dev/packages/intl](https://pub.dev/packages/intl)

#### å°å…¥

```
flutter pub add flutter_localizations --sdk=flutter
flutter pub add intl
```

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç›´ä¸‹ã«ä¸‹è¨˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ

l10n.yaml

```
arb-dir: lib/l10n
template-arb-file: app_en.arb
output-class: L10n
output-localization-file: app_localizations.dart
```

`arb-dir`: å¤šè¨€èªãƒ•ã‚¡ã‚¤ãƒ«ã®æ ¼ç´å ´æ‰€ `template-arb-file`: åŸºæº–ã¨ãªã‚‹è¨€èªãƒ•ã‚¡ã‚¤ãƒ«å (å¾Œè¿°ã®æ‰‹é †ã§ä½œæˆ) `output-class`: ã‚½ãƒ¼ã‚¹å†…ã§å¤šè¨€èªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’åˆ©ç”¨ã™ã‚‹éš›ã®ã‚¯ãƒ©ã‚¹å (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆåã¯é•·ã„ã®ã§æ¨å¥¨) `output-localization-file`: è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹å¤šè¨€èªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¯ãƒ©ã‚¹å (importã§æŒ‡å®š)

ä¸Šè¨˜ã§æŒ‡å®šã—ãŸã€arb-dir ã«ä»¥ä¸‹ã‚’ä½œæˆã™ã‚‹ã€‚

app\_en.arb

```
{
  "@@locale": "en",
  "title": "title"
}
```

app\_ja.arb

```
{
  "@@locale": "ja",
  "title": "ã‚¿ã‚¤ãƒˆãƒ«"
}
```

arbã®ãƒã‚¤ãƒ³ãƒˆï¼š

- app\_xx.arb ã® xx ã¨ã€`"@@locale":"xx"` ã¯ã€ä¸€è‡´ã•ã›ã‚‹ã€‚
- arbã®ä¸­èº«ã¯ jsonå½¢å¼ã€‚
    - dartã®ã‚ˆã†ã«ã€æœ€å¾Œã®è¦ç´ ã«ã‚«ãƒ³ãƒãŒã‚ã£ã¦ã‚‚è¨±ã•ã‚Œã‚‹ã€ã¨ã„ã†ã“ã¨ã¯ãªã„ã€‚
- åŒä¸€ã®ã‚­ãƒ¼ã«è¨­å®šã—ãŸå€¤ã§å¤šè¨€èªåŒ–ã•ã‚Œã‚‹ã€‚åŒä¸€ã®ã‚­ãƒ¼ãŒãªã„å ´åˆã¯ã€`template-arb-file`ã§æŒ‡å®šã—ãŸå€¤ã«ãªã‚‹ã€‚

#### ç”Ÿæˆ

pub get ã§ç”Ÿæˆã•ã‚Œã‚‹ã€‚

```
flutter pub get
```

ç”Ÿæˆå ´æ‰€

```
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ
L.dart_tools
  Lflutter_gen
    Lgen_l10n
     Lxxxx.dart  # åˆ©ç”¨æ™‚ã« import ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
     Lxxxx_en.dart # è‹±èªç”¨ã‚¯ãƒ©ã‚¹
     Lxxxx_ja.dart # æ—¥æœ¬èªç”¨ã‚¯ãƒ©ã‚¹
```

#### åˆ©ç”¨

Material ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å¼•æ•°ã§ä¸‹è¨˜ã‚’æŒ‡å®šã™ã‚‹ã€‚

```
    return MaterialApp(
      localizationsDelegates: L10n.localizationsDelegates,
      supportedLocales: L10n.supportedLocales,
```

`locale`: ã‚’è¨­å®šã™ã‚‹ã¨ã€ç«¯æœ«ã®è¨€èªè¨­å®šã«ã‚ˆã‚‰ãšã€è¨€èªã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚(ã‚¢ãƒ—ãƒªå†…ã§è¨€èªè¨­å®šã‚’ç”¨æ„ã—ã¦åˆ‡ã‚Šæ›¿ãˆã‚‹ãªã©ã€‚)

arbã«è¨˜è¼‰ã—ãŸã€ã‚­ãƒ¼åã§ä¸‹è¨˜ã®ã‚ˆã†ã«å¯¾å¿œã™ã‚‹æ–‡è¨€ã‚’å–å¾—ã™ã‚‹ã€‚

```
L10n.of(context)!.title
```

ãƒã‚¤ãƒ³ãƒˆ

- `L10n`ã¯ã€ã€€l10n.yaml ã«è¨˜è¼‰ã—ãŸã€output-class ã¨ãªã‚‹ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ã€`AppLocalizations`ã¨ãªã£ã¦ã„ã‚‹ã€‚
- VSCodeã§ã¯ã€è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒè‡ªå‹•ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œãªã‹ã£ãŸã®ã§ã€importã«ä»¥ä¸‹ã‚’è¿½è¨˜ã™ã‚‹ã€‚
    
    ```
    import 'package:flutter_gen/gen_l10n/app_localizations.dart';
    ```
    
- å¤šè¨€èªã®ã‚­ãƒ¼åã¯ã€nullableã¨ãªã£ã¦ã„ã‚‹ãŒã€åˆ©ç”¨ã‚·ãƒ¼ãƒ³ã®å¤§åŠã¯ã€non-null ã ã¨æ€ã†ã®ã§ã€énullå®£è¨€(!)ãŒå¿…è¦ã€‚
    - å½“ç„¶ã€è©²å½“ã®ã‚­ãƒ¼ãŒãªã‘ã‚Œã°ã€é•åã§ä¾‹å¤–ã‚’åãã€‚
- arbã®å€¤ã«ã€{value}ã§ã€å¤‰æ•°ã‚’åŸ‹ã‚è¾¼ã‚€ã“ã¨ãŒã§ãã‚‹ã€‚(value)ã¯ã€ãªã‚“ã§ã‚‚è‰¯ã„ã€‚
    
    ```
    "title": "ã‚¿ã‚¤ãƒˆãƒ« {value}"
    ```
    
    åˆ©ç”¨å´
    
    ```
    L10n.of(context)!.title('ã‚µãƒ–ã‚¿ã‚¤ãƒˆãƒ«')
    ```
    
- MaterialApp ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å†…ã§ã¯ã€ã¾ã åˆ©ç”¨ã§ããªã„ã€‚
    - ãã®ãŸã‚ã€MaterialAppã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿å¼•æ•°ã§ã‚ã‚‹ `title`ã«ã¯åˆ©ç”¨ã§ããªã„ã€‚
